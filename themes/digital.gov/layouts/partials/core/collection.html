{{/* Collection Component

  Wrapper component around uswds-collection that returns a collection of links built from a list of resources

  @data {object} list of pages or links that have a header, description, link
    - header that can be a link or plain header text
    - description
    - link for internal and external pages
        internal: "/resources/how-test-websites-for-accessibility/?dg"
        external: "https://designsystem.digital.gov/maturity-model/"
    - meta source is the source site for the link for the "headings" variant

  @length {number} sets a limit on the number of items to display, defaults to 10 if not set
  @variant {string} sets the variant to render for the collection-list-item — "default" "media" "headings"
    see https://designsystem.digital.gov/components/collection/ for variants

  @header_title {string} header title that will be a link
  @header_size {number} header size that accepts any number from 1-6
  @header_link {relative url} accepts a local hugo rel path "/topics/accessibility/"
  @header_id {string} is the hyphenated file name ("v21st-century-idea") to set as a id on the header
  @list_header {number} sets the header value for each list item (h3,h4). Accepts any number value
  @footer_text {string} accepts a short string description at the footer to link to other resources or page
  @footer_text {string} accepts a link topic name — "Accessibility", "Writing", "Video"
  @meta_source {string} the referring source for an external link, use .Params.source if using hugo objects

  @example

  {{- partial "core/collection.html" (dict "data" $resources_by_topic "length" 10 "header_title" .Title "header_link" .Permalink "header_size" 3 "header_id" $header_id "footer_text" .Title "variant" "media" "list_header" 3) -}}

*/}}
{{ $data := .data }}
{{ $variant := .variant }}
{{ $length := or .limit 10 }}
{{ $header_title := .header_title }}
{{ $header_size := .header_size }}
{{ $header_link := .header_link }}
{{ $header_id := .header_id }}
{{ $list_header := .list_header }}
{{ $footer_text := .footer_text }}
{{ $meta_source := .meta_source }}

{{ if $data }}
  <div class="dg-collection">
    <div class="grid-row">
      <div class="grid-col-12 tablet-lg:grid-col-10">
        {{ if $header_title }}
          {{ partial "partials/core/collection-header" (dict "header_title" $header_title "header_size" $header_size "header_link" $header_link "header_id" $header_id) }}
        {{ end }}
        {{ partial "partials/core/collection-uswds" (dict "data" $data "length" $length "variant" $variant "list_header" $list_header "meta_source" $meta_source) }}
      </div>
    </div>

    {{ if $footer_text }}
      <footer class="dg-collection__footer">
        <p class="more">
          <a href="{{- $header_link -}}">
            <span>More on {{ $footer_text }}</span>
            <svg
              class="usa-icon dg-icon dg-icon--standard margin-bottom-05"
              aria-hidden="true"
              focusable="false"
            >
              <use
                xlink:href="{{ "uswds/img/sprite.svg#arrow_forward" | relURL }}"
              ></use>
            </svg>
          </a>
        </p>
      </footer>
    {{ end }}
  </div>
{{ end }}