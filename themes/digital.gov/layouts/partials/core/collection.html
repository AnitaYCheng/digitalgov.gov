{{/* Gets the full array of items passed into the partial

  @list list of elements, can be single?
  @href set true to display images, else hide images
  @src
  @link set to false, make h2 a link to something
  @limit set a limit to the number of items displayed


  check if list has items
  fetch agency logo
  check in content/sources for matching source_url
  check google external logo logo if matching source
  else display digital gov logo

  pass list, href and source into collection-list-item
*/}}
{{ $list := .list }}
{{ $heading := .heading }}
{{ $href := "" }}
{{ $src := "" }}

{{/* If there are any items in the array at all... */}}
{{ if $list }}
  <div class="">
    {{/* Checks if there a heading is set in the partial */}}

    {{ if $heading }}
      <h2>{{- $heading -}}</h2>
    {{ end }}


    <ul class="usa-collection">
      {{ range $list }}

        {{/* .source_url is a url for looking up the logo */}}
        {{ if .Params.source_url }}
          {{ $src = (print "https://www.google.com/s2/favicons?domain=" .Params.source_url) }}
        {{ end }}

        {{/* Is the link external, look up in sources for a logo, provide a sample value expected "uswds" => "/logos/uswds-icon.png" */}}
        {{ if .Params.source }}
          {{ $source := .Site.GetPage (print "source_" .Params.source ) }}
          {{ if $source.Params.logo }}
            {{ $src = (printf "/logos/%s%s" $source.Params.logo "-icon.png") }}
          {{ end }}
        {{ end }}

        {{/* Use digital.gov logo */}}
        {{ if eq .Params.source_url .Params.source }}
          {{ $src = (print "/img/digit-50.png") }}
          {{ $href = (print .Permalink "?dg") }}
        {{ end }}

        {{ partial "partials/core/collection-list-item" (dict "item" . "href" $href "src" $src) }}

      {{ end }}
    </ul>
  </div>
{{ end }}
