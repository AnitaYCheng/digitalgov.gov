@use "uswds-core" as *;

.dg-guide__nav {
  @include u-display("none");

  @include at-media("tablet-lg") {
    @include u-display("block");
  }

  &-list {
    @include u-font("sans", "xs");
    margin-bottom: units(3);

    // Hides any nested ul that is not part of the current tree
    ul {
      @include u-display("none");
    }
  }

  // Override usa-sidenav styles for digitial.gov styles
  li.usa-sidenav__item {
    @include u-text("medium");

      a {
        @include u-padding-y(1);
        @include u-text("black");
        @include u-text("normal");
        @include u-text("no-underline");

      // Flex for the arrows
      @include u-display("flex");
      @include u-flex("align-center");

      &:hover {
        @include u-text("underline");
      }
    }

    .usa-current {
      @include u-bg("primary");
      @include u-text("white");
      @include u-text("semibold");

        &:hover {
          @include u-text("white");
          @include u-bg("primary-dark");
        }
      }

      // Adding arrows to any li that has child elements.
      li {
        @include u-text("normal");
        @include u-font("sans", "xs");

        a {
          .arrow-right {
            @include u-margin-left("05");

            background-size: 0.42rem;
          }
        }

        li {
          @include u-font("sans", "2xs");
          li {
            @include u-font("sans", "3xs");
          }
        }
      }
    }

    // When any child item is selected, the top-most parent li gets the .current class (via javascript)
    li.dg-guide__nav-list--current {
      @include u-position("relative");

      a.usa-current {
        @include u-text("semibold");

        &::after {
          content: "";

          @include u-border-left("05", "primary-darker", "solid");
          @include u-radius(0);
          @include u-position("absolute");
          @include u-top(0);
          @include u-bottom(0);
          @include u-left(0);
          @include u-z(100);
        }
      }

      a {
        span.arrow-right {
          @include u-margin-left("105");

          transform: rotate(90deg);
        }
      }

      a.usa-current {
        @include u-position("static");
      }

      ul {
        @include u-display("block");
      }
    }

    li.usa-sidenav__item {
      border-top: 1px solid color("gray-cool-60");

      a {
        &:not(.usa-current) {
          color: color("gray-cool-90");
        }

        &:hover:not(.usa-current) {
          color: color("blue-warm-60v");
        }
      }
    }

    li.usa-sidenav__item--read {
      background-color: color("gray-cool-4");
    }
  }

  .usa-sidenav {
    border-bottom: 1px solid color("gray-cool-60");
  }
}
